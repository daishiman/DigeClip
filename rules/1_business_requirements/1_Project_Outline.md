# 開発環境と本番環境の分離

DigeClipでは、開発環境と本番環境を明確に分離することで、安全な開発と運用を実現します。以下は環境分離の方針です：

## データベース環境

- **開発環境**: `digeclip-dev` Supabaseプロジェクト
  - 開発・テスト用のデータベース
  - テストデータを含む
  - `.env.development`ファイルで設定
  - 機能開発・テスト用

- **本番環境**: `digeclip-prod` Supabaseプロジェクト
  - 本番用のデータベース
  - 実際のユーザーデータのみ
  - `.env.production`ファイルで設定
  - サービス提供用

## 環境切り替え

プロジェクトでは、環境を簡単に切り替えるためのコマンドを用意しています：

```bash
# 開発環境の設定を有効にする
npm run use:dev

# 本番環境の設定を有効にする
npm run use:prod
```

## デプロイフロー

- **開発環境デプロイ**:
  - `development`ブランチへのプッシュで自動デプロイ
  - Cloudflare Pages Previewとして公開
  - 開発環境のSupabaseに接続

- **本番環境デプロイ**:
  - `production`ブランチへのプッシュで自動デプロイ
  - Cloudflare Pages本番サイトとして公開
  - 本番環境のSupabaseに接続

## 環境変数管理

環境変数は各環境ごとに分離して管理し、GitHub Secretsや.envファイルを使用して安全に保管します。

- 開発環境: `.env.development`（バージョン管理外）
- 本番環境: `.env.production`（バージョン管理外）
- ローカル開発: `.env`（環境切り替えコマンドによって自動生成）

---

このように環境を分離することで、開発中に本番データを誤って変更することを防ぎ、安全な開発・運用が可能になります。