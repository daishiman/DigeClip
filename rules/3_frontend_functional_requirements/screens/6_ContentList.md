# コンテンツ一覧画面仕様書

## 画面概要
システムが収集したコンテンツを一覧表示する画面です。YouTube動画やブログ記事、論文などが一箇所に集約されます。タイトルやサムネイル、要約ステータスなどを確認し、詳細画面へ遷移できます。タグやソースタイプによるフィルタリングや検索機能を提供し、ユーザーが必要なコンテンツを素早く見つけられるようにします。

## 画面レイアウト
```
+----------------------------------------------------------------------+
|  DigeClip > コンテンツ一覧                              ユーザー名 ▼ |
+----------------------------------------------------------------------+
|                                                                      |
|  検索: [                    ]  ソース: [すべて ▼]  タグ: [すべて ▼] |
|                                                                      |
|  期間: [2023/03/01] 〜 [2023/03/15]  ステータス: [要約済み ▼]       |
|                                                                      |
|  [フィルタをリセット]                                                |
|                                                                      |
|  +-------------------------------------------------------------------+
|  | コンテンツ一覧 (42件)                                            |
|  +-------------------------------------------------------------------+
|  |  +---------------------------------------------------------------+|
|  |  | [サムネ] AI技術の最新動向 2025年版                           ||
|  |  |         YouTube | 2023/03/15 | 要約済み | タグ: AI, テクノロジー||
|  |  +---------------------------------------------------------------+|
|  |                                                                   |
|  |  +---------------------------------------------------------------+|
|  |  | [サムネ] 新しいプログラミング言語の解説                      ||
|  |  |         YouTube | 2023/03/14 | 要約済み | タグ: プログラミング ||
|  |  +---------------------------------------------------------------+|
|  |                                                                   |
|  |  +---------------------------------------------------------------+|
|  |  | [サムネ] 量子コンピューティングの基礎                        ||
|  |  |         arXiv | 2023/03/13 | 要約済み | タグ: 量子, コンピュータ||
|  |  +---------------------------------------------------------------+|
|  |                                                                   |
|  |  +---------------------------------------------------------------+|
|  |  | [サムネ] ウェブ開発の最新トレンド                           ||
|  |  |         ブログ | 2023/03/12 | 要約済み | タグ: ウェブ, 開発    ||
|  |  +---------------------------------------------------------------+|
|  |                                                                   |
|  |  ... (他のコンテンツ) ...                                         |
|  |                                                                   |
|  +-------------------------------------------------------------------+
|                                                                      |
|  ページ: < 1 2 3 ... 10 >                                           |
|                                                                      |
+----------------------------------------------------------------------+
```

## 機能要件
1. **検索・フィルタリング**
   - キーワード検索: タイトルや内容に対するテキスト検索
   - ソースフィルタ: "YouTube", "RSS", "arXiv" などのソースタイプ
   - タグフィルタ: システムに登録されているタグによるフィルタリング
   - 期間フィルタ: 日付範囲による絞り込み
   - ステータスフィルタ: "要約済み", "処理中", "エラー" などの状態

2. **コンテンツ一覧表示**
   - カード形式での表示
   - 各カードには以下の情報を表示:
     - サムネイル画像
     - タイトル
     - ソースタイプ（アイコンと名称）
     - 公開日時
     - 要約ステータス
     - タグ一覧

3. **ページネーション**
   - 一度に表示する件数の制限（デフォルト20件）
   - ページ番号による移動
   - 前後ページへの移動ボタン

4. **コンテンツ詳細への遷移**
   - カードクリックでコンテンツ詳細画面へ遷移

5. **フィルタリセット**
   - 「フィルタをリセット」ボタンで全フィルタ条件をクリア

6. **結果件数表示**
   - 現在の検索・フィルタ条件に一致するコンテンツの総数を表示

## バリデーション要件
1. **検索キーワード**
   - 最大50文字
   - 特殊文字のエスケープ処理

2. **日付範囲**
   - 開始日 <= 終了日
   - 有効な日付形式（YYYY/MM/DD）
   - 未来の日付は現在日付に自動調整

3. **ページネーション**
   - 有効なページ番号（1以上、最大ページ数以下）

## エラーメッセージ
- 検索・フィルタエラー:
  - 「検索キーワードが長すぎます。50文字以内で入力してください」
  - 「開始日は終了日より前の日付を指定してください」
  - 「有効な日付形式で入力してください」

- データ取得エラー:
  - 「コンテンツの取得に失敗しました。再読み込みしてください」
  - 「検索条件に一致するコンテンツがありません」
  - 「サーバーとの通信に失敗しました」

## API連携
1. **コンテンツ一覧取得API**
   - エンドポイント: `/api/user/contents`
   - メソッド: GET
   - クエリパラメータ:
     - `page`: ページ番号（デフォルト: 1）
     - `pageSize`: 1ページあたりの件数（デフォルト: 20）
     - `search`: 検索キーワード
     - `tag`: タグ名
     - `source`: ソースタイプ
     - `startDate`: 開始日（ISO 8601形式）
     - `endDate`: 終了日（ISO 8601形式）
     - `status`: ステータス
   - レスポンス:
     ```json
     {
       "data": [
         {
           "id": 42,
           "title": "AIの最新動向 2025年版",
           "url": "https://www.youtube.com/watch?v=abc123",
           "published_at": "2023-03-15T14:30:00Z",
           "metadata": {
             "thumbnail": "https://i.ytimg.com/vi/abc123/maxresdefault.jpg",
             "duration": 1234
           },
           "tags": ["AI", "テクノロジー"],
           "status": "summarized"
         },
         // ... 他のコンテンツ
       ],
       "pagination": {
         "page": 1,
         "pageSize": 20,
         "total": 42
       }
     }
     ```

2. **タグ一覧取得API**
   - エンドポイント: `/api/tags`
   - メソッド: GET
   - レスポンス:
     ```json
     {
       "data": [
         { "id": 1, "name": "AI" },
         { "id": 2, "name": "テクノロジー" },
         { "id": 3, "name": "プログラミング" },
         // ... 他のタグ
       ]
     }
     ```

## UI/UX考慮事項
1. **レスポンシブデザイン**
   - モバイル表示時はカードを縦に1列で表示
   - タブレット/デスクトップでは複数列のグリッドレイアウト
   - フィルタ部分はモバイル表示時に折りたたみ可能に

2. **フィルタUI**
   - ドロップダウンは使いやすい幅と高さに
   - 日付選択はカレンダーピッカーを使用
   - タグ選択は複数選択可能なドロップダウンまたはチップ形式

3. **カードデザイン**
   - サムネイルは適切なサイズで表示（縦横比維持）
   - タイトルが長い場合は省略表示（...）
   - ステータスは色分けして視覚的に区別
     - 要約済み: 緑
     - 処理中: 青
     - エラー: 赤

4. **ローディング状態**
   - データ取得中はスケルトンローダーを表示
   - ページ切り替え時はスムーズなトランジション

5. **空の状態**
   - 検索結果が0件の場合は適切なメッセージを表示
   - 初回アクセス時にガイダンスを表示

6. **アクセシビリティ**
   - キーボードナビゲーション対応
   - スクリーンリーダー対応
   - 適切なARIA属性の使用

## 実装上の注意事項
1. **データ取得と表示**
   - ページロード時に初期データを取得
   - フィルタ変更時は新たにAPIリクエスト
   - URLクエリパラメータでフィルタ状態を保持（ブックマーク可能に）

2. **パフォーマンス最適化**
   - 画像の遅延読み込み（Lazy Loading）
   - 検索・フィルタ入力のデバウンス処理
   - 仮想スクロール技術の検討（大量データ時）

3. **状態管理**
   - フィルタ条件の状態管理（Redux, Context API等）
   - ページネーション状態の管理
   - 検索履歴の保存（オプション）

4. **エラーハンドリング**
   - ネットワークエラーの適切な処理
   - 部分的なデータ取得失敗時も、取得できた部分は表示
   - リトライ機能の実装

5. **日付処理**
   - タイムゾーン考慮（UTC ⇔ ローカル時間）
   - 日付フォーマットの一貫性
   - 相対時間表示の検討（「3日前」など）

6. **テスト**
   - フィルタ機能のユニットテスト
   - API連携のモックテスト
   - レスポンシブデザインのテスト