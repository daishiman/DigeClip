# アドバンストAIモデル比較画面仕様書

## 画面概要
複数のAIモデルによる同一コンテンツの要約結果を詳細に比較するための画面です。各モデルの要約品質、トークン消費量、処理時間などを視覚的に比較し、最適なAIモデルの選定や要約品質の評価を支援します。グラフやテキスト分析を通じて、AIモデル間のパフォーマンスの違いを明確に把握できます。

## 画面レイアウト
```
+----------------------------------------------------------------------+
|  DigeClip > アドバンストAIモデル比較                    ユーザー名 ▼ |
+----------------------------------------------------------------------+
|                                                                      |
|  コンテンツ選択: [AI技術の最新動向 2025年版 ▼]                      |
|                                                                      |
|  比較対象モデル:                                                     |
|  [✓] GPT-4  [✓] Claude-3  [✓] Gemini Pro  [ ] その他のモデル        |
|                                                                      |
|  +-------------------------------------------------------------------+
|  | 要約テキスト比較                                                 |
|  +-------------------------------------------------------------------+
|  |  +------------------------+  +------------------------+           |
|  |  | GPT-4                  |  | Claude-3               |           |
|  |  |                        |  |                        |           |
|  |  | 本動画では、2025年の   |  | この動画は2025年のAI   |           |
|  |  | AI業界における3つの    |  | 技術トレンドについて   |           |
|  |  | 重要なトレンドについて |  | 解説しています。主な   |           |
|  |  | 解説しています...      |  | ポイントは...          |           |
|  |  |                        |  |                        |           |
|  |  +------------------------+  +------------------------+           |
|  |                                                                   |
|  |  +------------------------+                                       |
|  |  | Gemini Pro             |                                       |
|  |  |                        |                                       |
|  |  | 2025年のAI技術の最新   |                                       |
|  |  | 動向として、次の3点が  |                                       |
|  |  | 挙げられています...    |                                       |
|  |  |                        |                                       |
|  |  +------------------------+                                       |
|  |                                                                   |
|  | [テキスト差分表示]  [類似度分析]                                  |
|  +-------------------------------------------------------------------+
|                                                                      |
|  +-------------------------------------------------------------------+
|  | パフォーマンス比較                                               |
|  +-------------------------------------------------------------------+
|  |                                                                   |
|  | トークン消費量:                                                   |
|  | [グラフ: GPT-4 (1,245), Claude-3 (1,102), Gemini Pro (987)]      |
|  |                                                                   |
|  | 処理時間:                                                         |
|  | [グラフ: GPT-4 (3.2秒), Claude-3 (2.8秒), Gemini Pro (2.5秒)]    |
|  |                                                                   |
|  | コスト:                                                           |
|  | [グラフ: GPT-4 ($0.025), Claude-3 ($0.020), Gemini Pro ($0.015)] |
|  |                                                                   |
|  +-------------------------------------------------------------------+
|                                                                      |
|  +-------------------------------------------------------------------+
|  | 品質評価                                                         |
|  +-------------------------------------------------------------------+
|  |                                                                   |
|  | 要約の網羅性:                                                     |
|  | [レーダーチャート: 各モデルの網羅性、簡潔さ、正確性などの比較]    |
|  |                                                                   |
|  | キーポイント抽出:                                                 |
|  | [表: 各モデルが抽出した主要ポイントの比較]                        |
|  |                                                                   |
|  | 手動評価:                                                         |
|  | GPT-4:    [★★★★☆]  コメント: [                            ]  |
|  | Claude-3: [★★★★★]  コメント: [                            ]  |
|  | Gemini:   [★★★☆☆]  コメント: [                            ]  |
|  |                                                                   |
|  +-------------------------------------------------------------------+
|                                                                      |
|  [レポート出力]                                                      |
|                                                                      |
+----------------------------------------------------------------------+
```

## 機能要件
1. **コンテンツ選択**
   - ドロップダウンで比較対象のコンテンツを選択
   - 最近要約されたコンテンツを優先表示
   - 複数のAIモデルで要約済みのコンテンツのみ表示

2. **モデル選択**
   - チェックボックスで比較対象のAIモデルを選択
   - 最低2つのモデルを選択可能
   - 最大5つのモデルまで同時比較可能

3. **要約テキスト比較**
   - 各モデルの要約テキストを並べて表示
   - テキスト差分表示機能（追加/削除/変更の視覚化）
   - 類似度分析（テキスト間の類似度をパーセンテージで表示）

4. **パフォーマンス比較**
   - トークン消費量のグラフ表示
   - 処理時間のグラフ表示
   - コスト比較のグラフ表示
   - 各指標の数値データも表示

5. **品質評価**
   - 要約の品質を複数の観点から評価
   - レーダーチャートによる多角的比較
   - キーポイント抽出の比較表
   - 手動評価機能（星評価とコメント）

6. **レポート出力**
   - 比較結果をPDFまたはCSVでエクスポート
   - グラフと数値データを含む詳細レポート

## バリデーション要件
1. **コンテンツ選択**
   - 必須選択
   - 複数モデルで要約済みのコンテンツのみ選択可能

2. **モデル選択**
   - 最低2つのモデルを選択必須
   - 最大5つまで選択可能

3. **手動評価**
   - 星評価は1〜5の整数
   - コメントは最大200文字

## エラーメッセージ
- 選択エラー:
  - 「比較対象のコンテンツを選択してください」
  - 「比較には最低2つのモデルを選択してください」
  - 「選択したコンテンツは複数のモデルで要約されていません」

- データ取得エラー:
  - 「要約データの取得に失敗しました」
  - 「パフォーマンスデータの取得に失敗しました」
  - 「比較分析の実行に失敗しました」

- 操作エラー:
  - 「レポート生成に失敗しました」
  - 「評価の保存に失敗しました」

## API連携
1. **コンテンツ一覧取得API**
   - エンドポイント: `/api/contents/multi-summarized`
   - メソッド: GET
   - クエリパラメータ: `limit`, `offset`
   - レスポンス:
     ```json
     {
       "data": [
         {
           "id": 42,
           "title": "AI技術の最新動向 2025年版",
           "url": "https://www.youtube.com/watch?v=abc123",
           "published_at": "2023-03-15T14:30:00Z",
           "modelCount": 3
         },
         // ...
       ],
       "pagination": {
         "total": 15
       }
     }
     ```

2. **要約比較データ取得API**
   - エンドポイント: `/api/contents/[id]/summaries/compare`
   - メソッド: GET
   - クエリパラメータ: `models[]`（複数指定可能）
   - レスポンス:
     ```json
     {
       "content": {
         "id": 42,
         "title": "AI技術の最新動向 2025年版",
         "url": "https://www.youtube.com/watch?v=abc123"
       },
       "summaries": [
         {
           "model": "gpt-4",
           "text": "本動画では、2025年のAI業界における3つの重要なトレンドについて解説しています...",
           "performance": {
             "tokens": 1245,
             "processingTime": 3.2,
             "cost": 0.025
           },
           "quality": {
             "coverage": 0.85,
             "conciseness": 0.78,
             "accuracy": 0.92
           },
           "keyPoints": ["トレンド1: ...", "トレンド2: ...", "トレンド3: ..."]
         },
         // 他のモデルのデータ
       ],
       "similarity": {
         "gpt-4_claude-3": 0.82,
         "gpt-4_gemini": 0.75,
         "claude-3_gemini": 0.79
       }
     }
     ```

3. **手動評価保存API**
   - エンドポイント: `/api/contents/[id]/summaries/[model]/evaluate`
   - メソッド: POST
   - リクエストボディ:
     ```json
     {
       "rating": 4,
       "comment": "要点を簡潔にまとめており、原文の内容をよく反映している"
     }
     ```
   - レスポンス: 成功時は200 OK

4. **レポート生成API**
   - エンドポイント: `/api/contents/[id]/summaries/compare/report`
   - メソッド: POST
   - リクエストボディ:
     ```json
     {
       "models": ["gpt-4", "claude-3", "gemini"],
       "format": "pdf"
     }
     ```
   - レスポンス: ファイルダウンロードまたはダウンロードURL

## UI/UX考慮事項
1. **比較表示**
   - 各モデルの結果を視覚的に区別（色分けなど）
   - スクロール同期（一方のテキストをスクロールすると他も同期）
   - ハイライト機能（キーワードや類似フレーズのハイライト）

2. **グラフ表示**
   - インタラクティブなグラフ（ホバーで詳細表示）
   - 適切な色使いと凡例
   - 数値とグラフの併用

3. **レイアウト**
   - 画面分割の適切な比率
   - タブ切り替えによる情報整理（オプション）
   - レスポンシブ対応（大画面優先）

4. **フィードバック**
   - データ読み込み中のローディング表示
   - 分析処理中のプログレス表示
   - 操作結果の明確なフィードバック

5. **アクセシビリティ**
   - グラフデータの代替テキスト
   - キーボード操作のサポート
   - 色覚異常に配慮した配色

## 実装上の注意事項
1. **パフォーマンス**
   - 大量のテキストデータの効率的な表示
   - グラフ描画の最適化
   - 必要に応じた遅延読み込み

2. **データ分析**
   - テキスト類似度計算のアルゴリズム選定
   - 差分表示のライブラリ活用（例: diff-match-patch）
   - 品質評価指標の計算方法の明確化

3. **グラフ実装**
   - Chart.js, D3.js などのライブラリ活用
   - レーダーチャートの適切な軸設定
   - グラフの凡例と説明の充実

4. **レポート生成**
   - PDFレンダリングライブラリの選定
   - レポートテンプレートの設計
   - 大量データの効率的な出力処理

5. **拡張性**
   - 新しいAIモデルの追加対応
   - 評価指標の追加・変更への対応
   - カスタム比較設定の保存機能（将来拡張）

6. **テスト**
   - 複数モデル選択時の表示テスト
   - 極端なデータ（非常に長い要約など）での表示テスト
   - グラフ描画の正確性テスト