# レイアウトコンポーネント仕様

## 概要
レイアウトコンポーネントは、アプリケーション全体で一貫したページ構造を提供します。ヘッダー、サイドバー、メインコンテンツエリア、フッターなどの共通要素を含み、各ページで再利用されます。

## コンポーネント構造
```
Layout
├── Header
├── Sidebar
├── MainContent
│   └── children (ページ固有のコンテンツ)
└── Footer (オプション)
```

## プロパティ
```typescript
interface LayoutProps {
  // ページ固有のコンテンツ
  children: React.ReactNode;

  // ページタイトル（ブラウザタブとヘッダーに表示）
  title?: string;

  // サイドバーの表示/非表示
  showSidebar?: boolean;

  // フッターの表示/非表示
  showFooter?: boolean;

  // 現在のアクティブなナビゲーション項目
  activeNavItem?: string;

  // カスタムクラス名
  className?: string;
}
```

## 機能要件

### 1. ヘッダー
- アプリケーションロゴ/名称の表示
- ユーザー情報とドロップダウンメニュー
- 通知アイコン（オプション）
- モバイル表示時のサイドバートグルボタン
- ページタイトルの表示

### 2. サイドバー
- ナビゲーションメニュー
  - ダッシュボード
  - ソース管理
  - コンテンツ一覧
  - AI設定
  - 通知設定
  - その他の管理機能
- 折りたたみ/展開機能
- モバイル表示時のオーバーレイモード
- アクティブ項目のハイライト

### 3. メインコンテンツ
- ページ固有のコンテンツを表示（children）
- 適切なパディングとマージン
- 最小高さの設定（短いコンテンツでもフッターが下部に表示されるように）
- スクロール可能な領域

### 4. フッター（オプション）
- コピーライト情報
- バージョン情報
- 補助的なリンク

## レスポンシブ対応

### 1. デスクトップ（1024px以上）
- サイドバーは常に表示
- 3カラムレイアウトが可能
- 十分な余白

### 2. タブレット（768px〜1023px）
- サイドバーは折りたたみ可能
- 2カラムレイアウトに最適化
- 余白の調整

### 3. モバイル（767px以下）
- サイドバーはオーバーレイモード（デフォルトで非表示）
- 1カラムレイアウト
- タッチ操作に最適化
- コンパクトなヘッダー

## 状態管理

### 1. サイドバーの状態
- 展開/折りたたみ状態
- モバイル表示時の表示/非表示

### 2. ユーザー状態
- ログイン情報
- 権限レベル
- プロフィール情報

### 3. テーマ設定（オプション）
- ライト/ダークモード
- カラーテーマ

## アクセシビリティ要件

### 1. キーボードナビゲーション
- Tabキーでのフォーカス移動
- ショートカットキー（オプション）
- フォーカス可視性

### 2. スクリーンリーダー対応
- 適切なランドマーク（header, nav, main, footer）
- ARIA属性の設定
- スキップリンク（メインコンテンツへのスキップ）

### 3. コントラストと可読性
- 十分なコントラスト比
- 適切なフォントサイズ
- 行間隔の確保

## UI/UX考慮事項

### 1. 一貫性
- 全ページで一貫したレイアウト
- 統一されたカラースキーム
- 一貫したタイポグラフィ

### 2. ナビゲーション
- 現在位置の明示
- パンくずリスト（必要に応じて）
- 直感的なメニュー構造

### 3. パフォーマンス
- レイアウト変更時のスムーズなトランジション
- 不要な再レンダリングの防止
- レイアウトシフトの最小化

## 実装上の注意点

### 1. コンポーネント分割
- ヘッダー、サイドバー、フッターを個別のコンポーネントとして実装
- 再利用可能な小さなコンポーネントへの分割

### 2. スタイリング
- レスポンシブデザインのためのメディアクエリ
- Flexboxまたはグリッドレイアウトの活用
- CSSモジュールまたはスタイルドコンポーネントの使用

### 3. 状態保持
- サイドバーの状態をローカルストレージに保存（オプション）
- ユーザー設定の永続化

### 4. パフォーマンス最適化
- メモ化によるレンダリング最適化
- 遅延読み込み（必要に応じて）
- 効率的なイベントハンドリング

## 使用例
```jsx
// 基本的な使用例
<Layout title="ダッシュボード" activeNavItem="dashboard">
  <DashboardContent />
</Layout>

// サイドバーなしの使用例
<Layout title="ログイン" showSidebar={false} showFooter={false}>
  <LoginForm />
</Layout>
```

## テスト要件

### 1. ユニットテスト
- コンポーネントのレンダリング
- プロパティの反映
- 条件付きレンダリング

### 2. インタラクションテスト
- サイドバーの折りたたみ/展開
- レスポンシブ動作
- ナビゲーション機能

### 3. アクセシビリティテスト
- キーボードナビゲーション
- スクリーンリーダー対応
- コントラスト比