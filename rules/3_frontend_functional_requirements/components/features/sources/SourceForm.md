# ソースフォームコンポーネント仕様

## 概要
ソースフォームコンポーネントは、新規ソースの追加および既存ソースの編集を行うためのフォームを提供します。ソースタイプ（YouTube、RSS、arXiv）に応じて、動的にフォームフィールドを変更します。

## コンポーネント構造
```
SourceForm
├── FormHeader
│   ├── Title
│   └── CloseButton
├── FormBody
│   ├── CommonFields
│   │   ├── NameField
│   │   ├── TypeSelector
│   │   └── StatusToggle
│   └── TypeSpecificFields
│       ├── YouTubeFields (type === "youtube")
│       ├── RssFields (type === "rss")
│       └── ArxivFields (type === "arxiv")
└── FormFooter
    ├── CancelButton
    └── SubmitButton
```

## プロパティ
```typescript
interface SourceFormProps {
  // 編集モードの場合、既存のソースデータを提供
  initialData?: Source;

  // フォーム送信時のコールバック
  onSubmit: (data: CreateSourceRequest | UpdateSourceRequest) => Promise<void>;

  // フォームキャンセル時のコールバック
  onCancel: () => void;

  // 送信中の状態
  isSubmitting?: boolean;
}
```

## 機能要件

### 1. 共通フィールド
- **ソース名**
  - 必須入力
  - 最大100文字
  - 入力中にリアルタイムバリデーション

- **ソースタイプ**
  - 必須選択
  - 選択肢: "youtube", "rss", "arxiv", "other"
  - 選択変更時に、タイプ固有フィールドを動的に表示/非表示

- **ステータス**
  - トグルボタンで有効/無効を切り替え
  - デフォルトは有効（true）

### 2. YouTube固有フィールド
- **チャンネルID**
  - 必須入力
  - YouTubeチャンネルID形式のバリデーション

- **チャンネルURL**
  - 必須入力
  - YouTube URLのバリデーション

- **フィードURL**
  - オプション入力
  - URL形式のバリデーション

- **登録者数**
  - オプション入力
  - 数値のみ許可

- **サムネイルURL**
  - オプション入力
  - URL形式のバリデーション

### 3. RSS固有フィールド
- **サイトURL**
  - 必須入力
  - URL形式のバリデーション

- **フィードURL**
  - 必須入力
  - URL形式のバリデーション

- **言語**
  - オプション選択
  - 言語選択リスト

- **ファビコンURL**
  - オプション入力
  - URL形式のバリデーション

### 4. arXiv固有フィールド
- **カテゴリ**
  - 必須選択
  - arXivカテゴリリスト

- **検索クエリ**
  - 必須入力
  - 最大200文字

## バリデーション要件

### 共通バリデーション
- ソース名: 必須、1〜100文字
- ソースタイプ: 必須、列挙型の値のみ

### タイプ別バリデーション
- YouTube
  - チャンネルID: 必須、YouTubeチャンネルIDパターン
  - チャンネルURL: 必須、youtube.comを含むURL
  - フィードURL: オプション、有効なURL
  - 登録者数: オプション、数値のみ
  - サムネイルURL: オプション、有効なURL

- RSS
  - サイトURL: 必須、有効なURL
  - フィードURL: 必須、有効なURL
  - 言語: オプション
  - ファビコンURL: オプション、有効なURL

- arXiv
  - カテゴリ: 必須
  - 検索クエリ: 必須、1〜200文字

## 状態管理
- フォーム全体の状態管理にはReact Hook Formを使用
- 入力値の変更に応じたリアルタイムバリデーション
- エラーメッセージの表示
- 送信中の状態管理（ボタン無効化、ローディングインジケータ表示）

## UI/UX考慮事項
- フォーカス管理: 初期表示時にソース名フィールドにフォーカス
- キーボードナビゲーション: Tabキーでのフィールド間移動
- エラー表示: フィールド下部に赤文字でエラーメッセージ
- 必須フィールド: ラベルに「*」マークを付加
- 送信ボタン: 必須フィールドが未入力の場合は無効化
- 入力補助: プレースホルダーテキストで入力例を表示

## アクセシビリティ
- 適切なラベルとaria属性
- エラーメッセージのスクリーンリーダー対応
- キーボード操作のサポート
- 十分なコントラスト比

## 実装上の注意点
- ソースタイプ変更時のフィールドリセット処理
- 編集モード時の初期値設定
- 非同期バリデーション（ソース名の重複チェックなど）
- エラー状態の適切な表示と解除
- 送信中の多重送信防止