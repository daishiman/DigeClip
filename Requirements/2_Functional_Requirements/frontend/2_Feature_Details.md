# 各画面の機能詳細・バリデーション

> **前提:**
> - 「**お金をかけずに、経験の浅いエンジニアでも短期間で**」実装できるよう、**画面構成も必要最小限**からスタートし、**バリデーションやUI/UX**も簡潔にする方針。
> - 将来拡張で高度なバリデーションや複雑なUIを追加する余地を残しつつ、**今すぐ必要な機能**だけを定義。

---
## 1. ログイン画面 (Login)

### 概要

管理者ユーザーがシステムにログインするための画面です。ユーザーID とパスワードを入力して認証を行います。
経験の浅いエンジニアでも、NextAuth や JWT などのライブラリを用いて簡単に実装できる構成を想定しています。

---

### 機能

1. **ユーザーID / パスワード 入力欄**
   - 英数字 or メールアドレスなどの形式で入力
2. **ログインボタン押下で認証処理**
   - 成功時はダッシュボードへ遷移
   - 失敗時はエラー表示

---

### バリデーション

- ユーザーID:
  - 必須入力
  - メールアドレス形式または英数字形式
- パスワード:
  - 必須入力
  - 最小8文字程度

---

### エラーメッセージ

- 「ユーザーIDまたはパスワードが不正です。」
- 「アカウントがロックされています。（将来対応で実装可）」

---

### UI/UX考慮事項

- **シンプルなフォーム**（2項目＋ログインボタン）
- パスワード入力は `type="password"` にしてマスキング
- エラー時、画面上部などに赤字メッセージを表示
- 初期フェーズでは管理者ログインのみ想定し、一般ユーザーにはログイン不要な運用も検討可

---

## 2. ダッシュボード画面 (Dashboard)

### 概要

ログイン後、最初に表示される画面です。システムの概要・ステータスを一目で把握できるようにし、各管理画面への入口として機能します。

---

### 機能

1. **新着コンテンツ数 / 通知履歴数** のサマリ表示
2. **リンクボタン**: 「ソース管理」「AIモデル設定」「通知設定」「コンテンツ一覧」
3. システムステータス（例: Cronジョブ最終実行時間やエラー有無）

---

### バリデーション

- この画面は主に「表示のみ」で入力は想定されない
- データ取得失敗時は適切にハンドリング

---

### エラーメッセージ

- 「データベースから情報を取得できませんでした。再読み込みしてください。」
- 「Cron設定が無効です。設定画面を確認してください。」

---

### UI/UX考慮事項

- **要点をひと目で把握**できるようカードや簡易グラフを表示
- 一般ユーザーが見ても問題ない場合は管理用ボタンは“管理者のみ”表示か非表示を切り替え
- スマホ対応でカードを縦に並べるなど、簡易レスポンシブを考慮

---

## 3. ソース管理画面 (Source Management)

### 概要

YouTubeチャンネルやブログRSS、arXivなどの**監視対象ソース**を管理する画面です。
新規追加や既存ソースの編集・削除、有効/無効切り替えを行います。

---

### 機能

1. **ソース一覧表示** (YouTube / ブログ / arXiv など)
2. **新規追加**（URL / RSS 登録）、編集、削除
3. **有効/無効** 切り替え (activeフラグ)

---

### バリデーション

- ソース名:
  - 必須, 100文字以内
- RSS/URL:
  - 必須, URL形式
- ソース種別 (タイプ):
  - 事前定義プルダウン (“YouTube”, “RSS”, “arXiv” など)
  - 将来拡張でユーザー追加も可

---

### エラーメッセージ

- 「URLが無効です。正しい形式で入力してください。」
- 「ソース名は必須です。」
- 「保存に失敗しました。再度お試しください。」

---

### UI/UX考慮事項

- **一覧表示**: テーブル or カード形式。ソース名、URL、タイプ、activeフラグなど
- 新規追加/編集は別ページ or モーダル画面
- シンプルなCRUDにし、経験の浅いエンジニアが**最小限のコード**で実装可能に

---

## 4. AIモデル設定画面 (AI Model Settings)

### 概要

複数のAIモデルをシステムで使えるように管理する画面です。OpenAI, Claude, GeminiなどのAPI Keyやパラメータを設定します。
デフォルトで使用するAIモデルもここで指定します。

---

### 機能

1. **AIモデル一覧** (OpenAI / Claude / Gemini)
2. **API Key / Model名** の登録・編集
3. **デフォルトモデル** の選択 (ラジオボタン等)

---

### バリデーション

- モデル名: 必須, 例: "GPT-3.5", "Claude-v1"
- API Key:
  - 必須, 文字列長チェック
  - 再表示しないなどセキュリティ対応
- トークン数などのパラメータ (将来拡張)

---

### エラーメッセージ

- 「API Keyを入力してください。」
- 「API Keyの形式が不正です。」
- 「保存に失敗しました。ネットワークを確認してください。」

---

### UI/UX考慮事項

- API Key はセキュリティ上、再表示なし or 先頭数文字のみ
- “テスト呼び出し” ボタン（将来拡張）でモデル動作確認
- デフォルトモデルを**一目で判別**できるようマーク

---

## 5. 通知設定画面 (Notification Settings)

### 概要

Discordへの通知方法を管理する画面です。Webhook URLを登録し、Embed形式のテンプレートを編集できます。
必要に応じてテスト送信を行い、設定の正しさを確認します。

---

### 機能

1. **Discord Webhook URL** 設定
2. **Embedテンプレート** の編集（タイトル、説明文、サムネURLなど）
3. **テスト送信** ボタン

---

### バリデーション

- Webhook URL: 必須, Discord形式
- Embed本文の文字数: Discordの最大制限 (6,000文字) を考慮

---

### エラーメッセージ

- 「Discord WebhookのURLが不正です。」
- 「テスト通知に失敗しました。Discord設定を確認してください。」

---

### UI/UX考慮事項

- **テンプレプレビュー**機能があるとユーザーが配置イメージを把握しやすい
- 失敗時にエラー内容 (例: 401 Unauthorized) を表示
- Discord公式URLのリンクを貼り、初心者がWebhook設定に迷わないようサポート

---

## 6. コンテンツ一覧画面 (Content List)

### 概要

システムが収集したコンテンツを一覧表示する画面です。YouTube動画やブログ記事、論文などが一箇所に集約されます。
タイトルやサムネ、要約ステータスなどを確認し、詳細画面へ遷移できます。

---

### 機能

1. **一覧表示**
   - タイトル、サムネイル、要約ステータス (要約済 / 未要約 / エラー等)
2. **フィルタ / 検索**
   - タグ、ソース、日付範囲など
3. **クリックで詳細画面**
   - コンテンツの詳細画面 (要約結果 / 通知履歴など)

---

### バリデーション

- フィルタ / 検索キーワード: 最大50文字程度
- 日付範囲指定: 開始日 <= 終了日

---

### エラーメッセージ

- 「コンテンツがありません。」 (検索0件時)
- 「検索キーワードが長すぎます。最大50文字まで。」

---

### UI/UX考慮事項

- サムネイルを小さく表示 or リスト形式
- スマホ対応でカード表示も検討
- ページネーション or 無限スクロールの選択 (初心者実装にはページネーションが簡単)

---

## 7. コンテンツ詳細画面 (Content Detail)

### 概要

コンテンツを1件ごとに詳細表示する画面です。YouTube 動画や論文、ブログ記事などの **タイトルやサムネイル、元リンク**、さらに **AI 要約結果**をまとめて確認できます。
将来的に “手動再要約” 機能を追加する場合、この画面から **再度要約処理**を実行する想定です。

---

### 機能

1. **タイトル＋サムネ＋元リンク**
   - YouTube動画の場合はサムネURL、論文PDFリンク、ブログ記事URLなど
   - クリックで外部リンクへ遷移
2. **要約結果**
   - 複数AIモデルがある場合、タブ切り替え or 並列表示
   - テキスト全文 or Embed部分のみ表示
3. **タグの追加/削除**
   - 管理者のみ / 全ユーザー可 などポリシー検討
   - 既存タグ or 新規タグを付与
4. **Discord 通知履歴**
   - 過去に送信した日時や Embedメッセージ内容ログ

---

### バリデーション

- **タグ入力時**
  - 最大20文字まで
  - #記号など先頭付加可否 (任意)
- **要約の再生成ボタン**(将来)
  - APIコール回数制限
  - 連打防止

---

### エラーメッセージ

- 「要約データが見つかりません。」
  - DB未登録 / 取得失敗
- 「タグ名が長すぎます。20文字以内にしてください。」
  - バリデーションエラー

---

### UI/UX考慮事項

- Embedで送ったサマリを再現 or 全文表示か選択可
- スクロール時に元リンクやタイトルが固定表示
- 手動再要約ボタン追加の場合は連打抑制など検討
- レスポンシブで小画面でも見やすく

---

## 8. システム設定画面 (System Settings) [将来拡張]

### 概要

システム全体の動作設定をまとめる画面。初期リリースでは.env 等で固定値でも構わないが、将来的にUI上から設定変更できるようにするイメージ。

---

### 機能

1. **Cron実行間隔の設定**
   - YouTubeのチャンネル, ブログ, arXivなど機能ごとに異なる間隔指定
2. **データ保持期間**
   - どのくらい古いコンテンツを残すか (90日, 180日, 365日 etc.)
3. **ログレベル**
   - INFO / DEBUG / ERROR など
4. **追加環境設定**
   - AIモデルの同時呼び出し数, 言語設定など (将来拡張)

---

### バリデーション

- **Cron間隔**
  - 1～24時間で各機能ごとに設定
- **データ保持期間**
  - 1～365日 or 無期限
- **ログレベル**
  - 定義済み選択肢のみ

---

### エラーメッセージ

- 「値が範囲外です。1～24時間の間で設定してください。」
- 「保存に失敗しました。再度お試しください。」

---

### UI/UX考慮事項

- 初期版では固定値で運用し、後から拡張でもOK
- 機能ごとに異なるCron設定を行うため、一覧表示などでわかりやすく
- 設定項目が増えすぎると初心者が混乱 → 初期は最小限に

---

## 総括

上記画面単位の「**機能**」「**バリデーション**」「**エラーメッセージ**」「**UI/UX考慮**」をまとめることで、**最低限のユーザー体験**を確保しながら、**短期間でリリース**できる形に仕上げています。
将来は拡張画面や高度なバリデーションを追加しても、**この構成をベース**に段階的に改良できるようになっています。
これにより、**「お金をかけずに」「容易に」「短期間で」**システムを構築しつつ、運用フェーズでの機能追加にも柔軟に対応可能です。
