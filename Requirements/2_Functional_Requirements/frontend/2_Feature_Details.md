# 機能詳細仕様

> **注意:** このドキュメントでは、各画面の詳細な機能仕様を定義します。共通要件（レスポンシブデザイン、エラーハンドリング、アクセシビリティなど）については [0_Common_Requirements.md](./0_Common_Requirements.md) を参照してください。

## 1. ログイン画面 (Login)

### 概要

管理者ユーザーがシステムにログインするための画面です。認証情報を入力し、認証に成功するとダッシュボード画面に遷移します。

---

### 機能

1. **ユーザー認証フォーム**
   - メールアドレス入力欄
   - パスワード入力欄
   - ログインボタン
2. **認証状態の保持**
   - 「ログイン状態を保持する」チェックボックス
3. **エラー表示**
   - 認証失敗時のエラーメッセージ
4. **パスワードリセット**
   - パスワードを忘れた場合のリンク（将来拡張）

---

### バリデーション

- メールアドレス: 必須, メール形式
- パスワード: 必須, 最小文字数

---

### エラーメッセージ

- 「メールアドレスを入力してください。」
- 「パスワードを入力してください。」
- 「メールアドレスまたはパスワードが正しくありません。」
- 「ログインに失敗しました。ネットワークを確認してください。」

---

### UI/UX考慮事項

- シンプルで分かりやすいフォームレイアウト
- パスワード表示/非表示の切り替え機能
- ログイン中の状態表示（ローディングインジケーター）
- 自動フォーカス（メールアドレス欄）

---

## 2. ダッシュボード画面 (Dashboard)

### 概要

システムの主要な情報や各機能へのアクセスを提供する中央ハブ画面です。新着コンテンツ数、要約状況、通知履歴などの概要情報を表示します。

---

### 機能

1. **ステータスカード**
   - 新着コンテンツ数
   - 未要約コンテンツ数
   - 通知済みコンテンツ数
   - エラー発生数
2. **最近の活動**
   - 最近追加されたコンテンツ（最大5件）
   - 最近送信された通知（最大5件）
3. **クイックアクセス**
   - 各管理画面へのカードリンク
     - ソース管理
     - AIモデル設定
     - 通知設定
     - コンテンツ一覧
4. **システム状態**（将来拡張）
   - API使用状況
   - ストレージ使用状況

---

### データ表示

- 数値: カウント表示（例: 「12件の新着コンテンツ」）
- リスト: タイトル、日時、ステータスアイコン
- カード: アイコン、タイトル、簡単な説明

---

### インタラクション

- カードホバー効果
- クリック可能な領域の明示
- 最新データの自動更新（オプション）

---

### UI/UX考慮事項

- 情報の優先順位付け（重要な情報を上部に配置）
- データ可視化（グラフやチャートの活用）
- スケルトンローダーによるロード状態の表示
- エラー状態の適切な表示

---

## 3. ソース管理画面 (Source Management)

### 概要

監視対象のYouTubeチャンネル、ブログRSS、arXivなどの情報ソースを管理する画面です。ソースの追加、編集、削除、有効/無効の切り替えを行います。

---

### 機能

1. **ソース一覧表示**
   - ソース名
   - ソースタイプ（YouTube/RSS/arXiv）
   - ステータス（有効/無効）
   - 最終更新日時
   - アクション（編集/削除）
2. **ソース追加**
   - 新規ソース追加ボタン
   - ソースタイプ選択
   - タイプ別入力フォーム
3. **ソース編集**
   - 既存ソース情報の編集
   - ステータス切り替え
4. **ソース削除**
   - 削除確認ダイアログ
5. **検索/フィルタリング**
   - ソース名検索
   - タイプ別フィルタリング
   - ステータス別フィルタリング

---

### ソースタイプ別フィールド

#### YouTube
- チャンネルID/URL（必須）
- チャンネル名（自動取得/手動入力）
- 説明（オプション）

#### RSS
- フィードURL（必須）
- サイト名（自動取得/手動入力）
- 説明（オプション）

#### arXiv
- カテゴリ（必須、複数選択可）
- キーワード（オプション）
- 著者（オプション）

---

### バリデーション

- ソース名: 必須, 最大100文字
- YouTube URL: 有効なYouTubeチャンネルURL形式
- RSS URL: 有効なURL形式, アクセス可能なRSSフィード
- arXivカテゴリ: 少なくとも1つ選択

---

### エラーメッセージ

- 「ソース名を入力してください。」
- 「有効なYouTubeチャンネルURLを入力してください。」
- 「有効なRSSフィードURLを入力してください。」
- 「少なくとも1つのarXivカテゴリを選択してください。」
- 「このソースは既に登録されています。」

---

### UI/UX考慮事項

- タイプ選択に応じたフォーム表示の動的変更
- URLの自動検証と情報取得
- ドラッグ&ドロップでの並べ替え（将来拡張）
- 一括操作（将来拡張）

---

## 4. AIモデル設定画面 (AI Model Settings)

### 概要

要約に使用するAIモデル（OpenAI, Claude, Gemini等）の設定を管理する画面です。API Keyの設定、デフォルトモデルの選択、モデル固有のパラメータ設定などを行います。

---

### 機能

1. **AIモデル一覧**
   - モデル名
   - プロバイダー（OpenAI, Anthropic, Google等）
   - ステータス（有効/無効）
   - デフォルト設定
2. **API Key設定**
   - プロバイダーごとのAPI Key入力
   - キーの検証機能
3. **モデル設定**
   - デフォルトモデルの選択
   - モデル固有パラメータの設定（将来拡張）
4. **テスト機能**（将来拡張）
   - テスト呼び出し
   - レスポンス確認

---

### バリデーション

- モデル名: 必須, 例: "GPT-3.5", "Claude-v1"
- API Key:
  - 必須, 文字列長チェック
  - 再表示しないなどセキュリティ対応
- トークン数などのパラメータ (将来拡張)

---

### エラーメッセージ

- 「API Keyを入力してください。」
- 「API Keyの形式が不正です。」
- 「保存に失敗しました。ネットワークを確認してください。」

---

### UI/UX考慮事項

- API Key はセキュリティ上、再表示なし or 先頭数文字のみ
- "テスト呼び出し" ボタン（将来拡張）でモデル動作確認
- デフォルトモデルを**一目で判別**できるようマーク

---

## 5. 通知設定画面 (Notification Settings)

### 概要

Discordへの通知方法を管理する画面です。Webhook URLを登録し、Embed形式のテンプレートを編集できます。
必要に応じてテスト送信を行い、設定の正しさを確認します。

---

### 機能

1. **Discord Webhook URL** 設定
2. **Embedテンプレート** の編集（タイトル、説明文、サムネURLなど）
3. **テスト送信** ボタン
4. **通知条件** 設定（将来拡張）
   - 全コンテンツ通知
   - 特定タグのみ通知
   - 特定ソースのみ通知

---

### テンプレート編集

- タイトル形式: 変数置換対応（例: `{title} - 要約`)
- 説明文形式: 変数置換対応（例: `{summary}`)
- カラー設定: カラーピッカー
- サムネイル: URL or 元コンテンツのサムネ使用選択

---

### バリデーション

- Webhook URL: 必須, Discord Webhook URL形式
- テンプレートタイトル: 必須, 最大256文字
- テンプレート説明: 必須, 最大4000文字

---

### エラーメッセージ

- 「Webhook URLを入力してください。」
- 「有効なDiscord Webhook URLを入力してください。」
- 「テンプレートタイトルを入力してください。」
- 「テスト送信に失敗しました。URLを確認してください。」

---

### UI/UX考慮事項

- テンプレートのプレビュー表示
- 変数リストのヘルプ表示
- テスト送信結果のフィードバック
- 複数チャンネル設定（将来拡張）

---

## 6. コンテンツ一覧画面 (Content List)

### 概要

収集されたコンテンツの一覧を表示し、検索、フィルタリング、ソートなどの機能を提供します。
各コンテンツの基本情報（タイトル、ソース、日時など）と要約ステータスを確認できます。

---

### 機能

1. **コンテンツ一覧表示**
   - タイトル
   - サムネイル（可能な場合）
   - ソース名
   - 公開日時
   - 要約ステータス（未要約/要約済み/エラー）
   - 通知ステータス（未通知/通知済み）
2. **検索/フィルタリング**
   - キーワード検索
   - ソース別フィルタ
   - 日付範囲フィルタ
   - ステータス別フィルタ
   - タグ別フィルタ（将来拡張）
3. **ソート機能**
   - 日付（新しい順/古い順）
   - タイトル（昇順/降順）
   - ソース名（昇順/降順）
4. **一括操作**（将来拡張）
   - 選択したコンテンツの一括要約
   - 選択したコンテンツの一括通知
   - 選択したコンテンツの一括削除

---

### 表示形式

- リスト表示: コンパクトな情報表示
- グリッド表示: サムネイル重視の表示
- ページネーション: 1ページあたり10/20/50件

---

### インタラクション

- クリックでコンテンツ詳細画面へ遷移
- フィルター適用時のURL更新（ブックマーク可能）
- 無限スクロール or ページネーション

---

### UI/UX考慮事項

- スケルトンローダーによるロード状態の表示
- フィルター条件の視覚的表示と簡単な解除
- 検索結果なしの適切な表示
- モバイル表示の最適化

---

## 7. コンテンツ詳細画面 (Content Detail)

### 概要

個別のコンテンツの詳細情報と要約結果を表示します。元コンテンツへのリンク、複数AIモデルによる要約結果の比較、通知履歴などを確認できます。

---

### 機能

1. **コンテンツ基本情報**
   - タイトル
   - サムネイル
   - ソース名
   - 公開日時
   - 元URL（クリック可能）
2. **要約結果表示**
   - AIモデル別タブ切り替え
   - 要約テキスト
   - 要約生成日時
   - 再要約ボタン
3. **通知履歴**
   - 通知日時
   - 通知先
   - 通知ステータス
   - 再通知ボタン
4. **タグ管理**
   - 現在のタグ表示
   - タグ追加/削除
5. **アクション**
   - 元コンテンツを開く
   - 編集（タイトルや説明の手動修正）
   - 削除

---

### 表示形式

- 要約結果: マークダウン形式対応
- コードブロック: シンタックスハイライト（技術コンテンツの場合）
- 画像: レスポンシブ表示

---

### インタラクション

- モデル切り替えタブ
- 通知履歴の展開/折りたたみ
- タグのクリックでフィルタリング
- 編集モードの切り替え

---

### UI/UX考慮事項

- 要約テキストの読みやすさ（適切なフォントサイズと行間）
- 元コンテンツとの明確な区別
- 複数モデル比較の視覚的表現
- 編集操作の直感的なUI
