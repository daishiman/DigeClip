# ダッシュボード画面仕様書

## 画面概要
ログイン後、最初に表示される画面です。システムの概要・ステータスを一目で把握できるようにし、各管理画面への入口として機能します。新着コンテンツ数や通知履歴数などの重要情報をカード形式で表示し、ユーザーが必要な情報に素早くアクセスできるようにします。

## 画面レイアウト
```
+----------------------------------------------------------------------+
|  DigeClip Dashboard                                      ユーザー名 ▼ |
+----------------------------------------------------------------------+
|                                                                      |
|  +-------------------+  +-------------------+  +-------------------+ |
|  | 新着コンテンツ    |  | 通知履歴         |  | システムステータス | |
|  |                   |  |                   |  |                   | |
|  | 10件              |  | 5件               |  | 正常稼働中        | |
|  |                   |  |                   |  | 最終更新: 10分前  | |
|  | [詳細を見る]      |  | [詳細を見る]      |  |                   | |
|  +-------------------+  +-------------------+  +-------------------+ |
|                                                                      |
|  +-------------------+  +-------------------+  +-------------------+ |
|  | ソース管理        |  | AIモデル設定      |  | 通知設定         | |
|  |                   |  |                   |  |                   | |
|  | [管理画面へ]      |  | [管理画面へ]      |  | [管理画面へ]      | |
|  +-------------------+  +-------------------+  +-------------------+ |
|                                                                      |
|  +-------------------------------------------------------------------+
|  | 最近の活動                                                       |
|  |                                                                  |
|  | • 2023/03/15 15:30 - 新しいコンテンツが5件追加されました        |
|  | • 2023/03/15 14:20 - YouTubeチャンネル「Tech News」から更新     |
|  | • 2023/03/15 12:10 - Discordへ3件の通知を送信しました           |
|  |                                                                  |
|  | [すべての活動を見る]                                             |
|  +-------------------------------------------------------------------+
|                                                                      |
+----------------------------------------------------------------------+
```

## 機能要件
1. **ヘッダー部分**
   - システム名（DigeClip）の表示
   - ログインユーザー名とドロップダウンメニュー（ログアウト、設定など）

2. **ステータスカード**
   - **新着コンテンツ**
     - 過去24時間に追加されたコンテンツ数
     - 「詳細を見る」リンク（コンテンツ一覧画面へ遷移）
   - **通知履歴**
     - 過去24時間に送信された通知数
     - 「詳細を見る」リンク（通知履歴画面へ遷移）
   - **システムステータス**
     - システム全体の稼働状態（正常/警告/エラー）
     - 最終更新日時

3. **管理メニューカード**
   - **ソース管理**
     - 「管理画面へ」リンク（ソース管理画面へ遷移）
   - **AIモデル設定**
     - 「管理画面へ」リンク（AIモデル設定画面へ遷移）
   - **通知設定**
     - 「管理画面へ」リンク（通知設定画面へ遷移）

4. **最近の活動セクション**
   - システム内の最近のアクティビティを時系列で表示
   - 各アクティビティには日時とアクション内容を表示
   - 「すべての活動を見る」リンク（将来拡張）

## バリデーション要件
- この画面は主に表示のみで入力は想定されないため、特別なバリデーションは不要
- データ取得失敗時は適切なエラーメッセージを表示

## エラーメッセージ
- 「データベースから情報を取得できませんでした。再読み込みしてください。」
- 「Cron設定が無効です。設定画面を確認してください。」
- 「システムステータスの取得に失敗しました。」

## API連携
1. **ダッシュボード概要API**
   - エンドポイント: `/api/dashboard/summary`
   - メソッド: GET
   - レスポンス:
     ```json
     {
       "newContents": {
         "count": 10,
         "lastUpdated": "2023-03-15T15:30:00Z"
       },
       "notifications": {
         "count": 5,
         "lastSent": "2023-03-15T14:20:00Z"
       },
       "systemStatus": {
         "status": "normal", // "normal", "warning", "error"
         "lastChecked": "2023-03-15T15:45:00Z",
         "message": "すべてのサービスが正常に動作しています"
       }
     }
     ```

2. **最近の活動API**
   - エンドポイント: `/api/dashboard/activities`
   - メソッド: GET
   - クエリパラメータ: `limit=5`（表示件数）
   - レスポンス:
     ```json
     {
       "activities": [
         {
           "id": 123,
           "timestamp": "2023-03-15T15:30:00Z",
           "type": "content_added",
           "message": "新しいコンテンツが5件追加されました",
           "details": { /* 詳細情報 */ }
         },
         {
           "id": 122,
           "timestamp": "2023-03-15T14:20:00Z",
           "type": "source_updated",
           "message": "YouTubeチャンネル「Tech News」から更新",
           "details": { /* 詳細情報 */ }
         }
       ],
       "total": 42
     }
     ```

## UI/UX考慮事項
1. **レスポンシブデザイン**
   - モバイル表示時はカードを縦に並べる
   - タブレット/デスクトップではグリッドレイアウト

2. **視覚的階層**
   - 重要な情報（ステータスカード）を上部に配置
   - 色とアイコンを使って状態を直感的に伝える
     - 正常: 緑
     - 警告: 黄色
     - エラー: 赤

3. **アクセシビリティ**
   - 適切なコントラスト比
   - スクリーンリーダー対応
   - キーボードナビゲーション

4. **パフォーマンス**
   - 初期表示を高速化するための最適化
   - 必要に応じて段階的なデータ読み込み

## 実装上の注意事項
1. **データ取得**
   - ページロード時に必要なデータをAPIから取得
   - データ取得中はスケルトンローダーやプレースホルダーを表示
   - エラー発生時は適切なフォールバックUIを表示

2. **状態管理**
   - グローバル状態管理（Redux, Context API等）を使用してユーザー情報を管理
   - ダッシュボードデータはローカル状態で十分

3. **自動更新**
   - 長時間画面を開いている場合、定期的にデータを更新（例: 5分ごと）
   - WebSocketを使用したリアルタイム更新も将来的に検討可能

4. **エラーハンドリング**
   - ネットワークエラーの適切な処理
   - 部分的なデータ取得失敗時も、取得できた部分は表示

5. **パフォーマンス最適化**
   - 不要なリレンダリングの防止
   - 画像の最適化（特にステータスアイコンなど）
   - コンポーネントの遅延読み込み