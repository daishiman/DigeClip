# ログイン画面仕様書

## 画面概要
管理者ユーザーがシステムにログインするための画面です。ユーザーIDとパスワードを入力して認証を行います。
経験の浅いエンジニアでも、NextAuthやJWTなどのライブラリを用いて簡単に実装できる構成を想定しています。

## 画面レイアウト
```
+----------------------------------+
|                                  |
|          DigeClip Login          |
|                                  |
|  +----------------------------+  |
|  | ユーザーID                 |  |
|  +----------------------------+  |
|                                  |
|  +----------------------------+  |
|  | パスワード                 |  |
|  +----------------------------+  |
|                                  |
|  +----------------------------+  |
|  |        ログイン            |  |
|  +----------------------------+  |
|                                  |
|  [エラーメッセージ表示エリア]    |
|                                  |
+----------------------------------+
```

## 機能要件
1. **ユーザーID入力欄**
   - 英数字またはメールアドレス形式で入力
   - プレースホルダー: 「ユーザーIDを入力」

2. **パスワード入力欄**
   - マスキング表示（type="password"）
   - プレースホルダー: 「パスワードを入力」

3. **ログインボタン**
   - クリックで認証処理を実行
   - 成功時: ダッシュボード画面へ遷移
   - 失敗時: エラーメッセージを表示

4. **エラーメッセージ表示エリア**
   - 認証失敗時に赤字でメッセージを表示
   - 初期状態では非表示

## バリデーション要件
1. **ユーザーID**
   - 必須入力
   - メールアドレス形式または英数字形式（3文字以上）
   - 最大長: 100文字

2. **パスワード**
   - 必須入力
   - 最小長: 8文字
   - 最大長: 100文字

## エラーメッセージ
- 入力検証エラー:
  - 「ユーザーIDを入力してください」
  - 「パスワードを入力してください」
  - 「パスワードは8文字以上で入力してください」

- 認証エラー:
  - 「ユーザーIDまたはパスワードが正しくありません」
  - 「アカウントがロックされています」（将来対応）

## API連携
- **認証API**
  - エンドポイント: `/api/auth/login`
  - メソッド: POST
  - リクエストボディ:
    ```json
    {
      "userId": "string",
      "password": "string"
    }
    ```
  - レスポンス（成功時）:
    ```json
    {
      "token": "JWT_TOKEN",
      "user": {
        "id": "number",
        "name": "string",
        "role": "string"
      }
    }
    ```

## UI/UX考慮事項
1. **レスポンシブ対応**
   - モバイル端末でも使いやすいレイアウト
   - 入力フォームは画面幅に応じて調整

2. **アクセシビリティ**
   - 適切なラベルとaria属性の使用
   - キーボード操作のサポート（Tabキーでのフォーカス移動、Enterキーでのログイン）

3. **セキュリティ**
   - パスワードの平文保存禁止
   - ブルートフォース攻撃対策（ログイン試行回数制限など）

4. **ユーザビリティ**
   - 入力中のバリデーションフィードバック
   - ログイン処理中はボタンを無効化し、ローディングインジケータを表示

## 実装上の注意事項
1. **認証処理**
   - JWT（JSON Web Token）を使用した認証を推奨
   - トークンはlocalStorageではなくHTTP-Onlyクッキーに保存
   - トークンの有効期限を適切に設定（例: 24時間）

2. **エラーハンドリング**
   - ネットワークエラーの適切な処理
   - バックエンドからのエラーメッセージの表示

3. **セキュリティ対策**
   - CSRF対策の実装
   - XSS対策（入力値のサニタイズ）
   - レート制限の実装（短時間での多数のリクエスト防止）

4. **テスト**
   - 正常系・異常系のユニットテスト
   - E2Eテストでの認証フロー確認

5. **パフォーマンス**
   - 認証処理の高速化
   - 不要なリレンダリングの防止