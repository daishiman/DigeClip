# ヘッダーコンポーネント仕様

## 概要
ヘッダーコンポーネントは、アプリケーション全体の上部に表示される共通要素です。アプリケーション名/ロゴ、ナビゲーションメニュー、ユーザー情報、通知などを含み、一貫したブランディングとナビゲーション体験を提供します。

## コンポーネント構造
```
Header
├── LogoSection
│   ├── Logo
│   └── AppName
├── NavigationSection (オプション)
│   └── BreadcrumbNav
├── ActionsSection
│   ├── NotificationIcon (オプション)
│   ├── ThemeToggle (オプション)
│   └── UserMenu
│       ├── UserAvatar
│       └── UserDropdown
└── MobileMenuButton (モバイル表示時)
```

## プロパティ
```typescript
interface HeaderProps {
  // 現在のページタイトル
  pageTitle?: string;

  // サイドバートグルの関数
  onSidebarToggle?: () => void;

  // ユーザー情報
  user?: {
    name: string;
    email: string;
    avatar?: string;
    role: string;
  };

  // 通知の表示有無
  showNotifications?: boolean;

  // 通知の数
  notificationCount?: number;

  // 通知クリック時のコールバック
  onNotificationClick?: () => void;

  // ログアウト関数
  onLogout?: () => void;

  // カスタムクラス名
  className?: string;
}
```

## 機能要件

### 1. ロゴとアプリケーション名
- クリック可能なロゴ（ホームページへのリンク）
- アプリケーション名の表示
- レスポンシブ対応（モバイル表示時はコンパクト化）

### 2. ページタイトル/パンくずリスト
- 現在のページタイトルの表示
- パンくずリストによるナビゲーション階層の表示（オプション）
- モバイル表示時は省略または簡略化

### 3. ユーザーメニュー
- ユーザーアバターの表示
- クリックでドロップダウンメニュー表示
- メニュー項目:
  - ユーザー名と役割
  - プロフィール設定へのリンク
  - テーマ切り替え（オプション）
  - ログアウトボタン

### 4. 通知機能（オプション）
- 通知アイコンの表示
- 未読通知数のバッジ表示
- クリックで通知リスト表示
- 通知の既読/未読状態管理

### 5. モバイルメニュー
- 画面幅が狭い場合にサイドバートグルボタンを表示
- ハンバーガーアイコンの使用
- クリックでサイドバーを表示/非表示

## レスポンシブ対応

### 1. デスクトップ（1024px以上）
- フルサイズのロゴとアプリケーション名
- ページタイトル/パンくずリストの表示
- 通知とユーザーメニューの完全表示

### 2. タブレット（768px〜1023px）
- コンパクト化されたロゴとアプリケーション名
- 省略されたページタイトル
- 通知とユーザーメニューの維持

### 3. モバイル（767px以下）
- 最小限のロゴ表示
- サイドバートグルボタンの表示
- 重要なアクションのみ表示
- ドロップダウンメニューのフルスクリーン表示

## 状態管理

### 1. ドロップダウンメニュー
- ユーザーメニューの開閉状態
- 通知リストの開閉状態
- 外部クリックでの自動閉じる機能

### 2. 通知状態（オプション）
- 未読通知のカウント
- 通知の既読/未読状態
- 新着通知のハイライト

### 3. テーマ設定（オプション）
- ライト/ダークモードの切り替え
- ユーザー設定の保存

## アクセシビリティ要件

### 1. キーボードナビゲーション
- Tabキーでのフォーカス移動
- Enterキーでのアクション実行
- Escキーでのドロップダウン閉じる

### 2. スクリーンリーダー対応
- 適切なARIA属性の設定
  - `role="banner"`
  - `aria-expanded`（ドロップダウンメニュー）
  - `aria-label`（アイコンボタン）
- 意味のある代替テキスト

### 3. フォーカス管理
- 視覚的なフォーカスインジケーター
- ドロップダウン内でのフォーカストラップ

## UI/UX考慮事項

### 1. 視覚的デザイン
- アプリケーションのブランドカラーの使用
- 十分なコントラスト比
- 適切な余白とアライメント
- シャドウやエレベーションの適用

### 2. インタラクション
- ホバー効果
- クリックフィードバック
- スムーズなトランジション
- タッチフレンドリーなターゲットサイズ

### 3. 一貫性
- アプリケーション全体での一貫したスタイル
- 標準的なアイコンの使用
- 予測可能な動作

## 実装上の注意点

### 1. 固定ヘッダー
- 画面上部に固定表示
- スクロール時の挙動（シャドウ追加など）
- 適切なz-indexの設定

### 2. パフォーマンス
- 不要な再レンダリングの防止
- イベントリスナーの最適化
- アニメーションのパフォーマンス

### 3. ブラウザ互換性
- 異なるブラウザでの一貫した表示
- フォールバックスタイルの提供
- ベンダープレフィックスの適用

## 使用例
```jsx
// 基本的な使用例
<Header
  pageTitle="ダッシュボード"
  user={{
    name: "山田太郎",
    email: "yamada@example.com",
    role: "管理者"
  }}
  onSidebarToggle={toggleSidebar}
  onLogout={handleLogout}
/>

// 通知機能付きの使用例
<Header
  pageTitle="ソース管理"
  user={{
    name: "山田太郎",
    email: "yamada@example.com",
    avatar: "/images/avatars/yamada.jpg",
    role: "管理者"
  }}
  showNotifications={true}
  notificationCount={5}
  onNotificationClick={openNotifications}
  onSidebarToggle={toggleSidebar}
  onLogout={handleLogout}
/>
```

## テスト要件

### 1. ユニットテスト
- コンポーネントのレンダリング
- プロパティの反映
- 条件付きレンダリング

### 2. インタラクションテスト
- ドロップダウンメニューの開閉
- ボタンクリックイベント
- レスポンシブ動作

### 3. アクセシビリティテスト
- キーボードナビゲーション
- スクリーンリーダー対応
- コントラスト比