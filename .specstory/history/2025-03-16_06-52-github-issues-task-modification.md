<!-- Generated by SpecStory -->

# GitHub Issues Task Modification (2025-03-16 15:52:59)

_**User**_

github上のissues上のタスクを取得したものが @issues.json です。 @Requirements の内容をすべて確認して。 @issues.json のタスクを変更してください。DBの構造が変更して、ソレに伴って、バックエンド・フロントエンドが変更しています。

---

_**Assistant**_

# 要件ドキュメントの確認

まず、Requirementsフォルダの内容を確認して、システムの要件を理解します。

---

Read file: /Users/dm/dev/dev/DigeClip/Requirements/requirements-overview.md

---

次に、システム開発要件を確認します。

---

Read file: /Users/dm/dev/dev/DigeClip/Requirements/System_Development_Requirements.md

---

次に、機能要件の詳細を確認します。

---

<details>
            <summary>Listed directory /Users/dm/dev/dev/DigeClip/Requirements/2_Functional_Requirements • **3** results</summary>
        
| Name |
|-------|
| 📁 `backend` |
| 📁 `frontend` |
| 📁 `data` |

</details>

---

データベース設計を確認します。

---

<details>
            <summary>Listed directory /Users/dm/dev/dev/DigeClip/Requirements/2_Functional_Requirements/data • **4** results</summary>
        
| Name |
|-------|
| 📄 `2_Schema_Design.md` |
| 📄 `3_Data_Lifecycle.md` |
| 📄 `4_Privacy_Compliance.md` |
| 📄 `1_Database_Selection.md` |

</details>

---

データベースのスキーマ設計を確認します。

---

Read file: /Users/dm/dev/dev/DigeClip/Requirements/2_Functional_Requirements/data/2_Schema_Design.md

---

バックエンドの実装要件を確認します。

---

<details>
            <summary>Listed directory /Users/dm/dev/dev/DigeClip/Requirements/2_Functional_Requirements/backend • **7** results</summary>
        
| Name |
|-------|
| 📄 `3_API_Design.md` |
| 📄 `4_External_Integration.md` |
| 📄 `2_Technology_Stack.md` |
| 📄 `1_Architecture_Overview.md` |
| 📄 `0_Common_Requirements.md` |
| 📄 `5_Implementation_Patterns.md` |
| 📁 `api` |

</details>

---

フロントエンドの実装要件を確認します。

---

<details>
            <summary>Listed directory /Users/dm/dev/dev/DigeClip/Requirements/2_Functional_Requirements/frontend • **8** results</summary>
        
| Name |
|-------|
| 📄 `1_Screen_List_and_Transitions.md` |
| 📄 `2_Feature_Details.md` |
| 📄 `3_Frontend_Technology_Stack.md` |
| 📁 `components` |
| 📄 `0_Common_Requirements.md` |
| 📁 `pages` |
| 📁 `types` |
| 📁 `screens` |

</details>

---

フロントエンドの画面一覧を確認します。

---

Read file: /Users/dm/dev/dev/DigeClip/Requirements/2_Functional_Requirements/frontend/1_Screen_List_and_Transitions.md

---

データベースのスキーマ設計を詳しく確認しました。次に、issuesの内容を確認して、必要な変更を検討します。

---

Read file: issues.json

---

要件ドキュメントとissuesの内容を確認しました。データベースの構造変更に伴い、バックエンドとフロントエンドのタスクを更新する必要があります。

以下に、データベース構造の変更点とそれに伴うタスクの変更を提案します：

## データベース構造の変更点

1. **ソースタイプごとに別テーブル**:
   - `sources`テーブルを基本情報として保持
   - `youtube_sources`, `rss_sources`, `arxiv_sources`などのソースタイプごとに別テーブルを作成
   - 各テーブルは`source_id`を外部キーとして持つ

2. **要約の段階的ステップ対応**:
   - `summaries`テーブルに`stage`カラムを追加
   - 同一コンテンツに対して「概要」「見出し」「詳細」など複数段階の要約を保持

3. **メタデータの柔軟な保存**:
   - 各テーブルに`metadata` (JSONB)カラムを追加
   - 将来の拡張性を確保

## タスクの変更提案

### データベース関連タスク

```json
{
  "body": "## データベース (Supabase) のセットアップ\n\n- [ ] Supabase プロジェクトの作成 (supabase.com)\n- [ ] プロジェクト設定からデータベース接続情報を取得 (DATABASE_URL, NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY)\n- [ ] Prisma スキーマファイル (prisma/schema.prisma) を定義 (テーブル定義を記述)\n    - [ ] sources テーブル (基本情報)\n    - [ ] youtube_sources テーブル (YouTube固有情報)\n    - [ ] rss_sources テーブル (RSS/ブログ固有情報)\n    - [ ] arxiv_sources テーブル (arXiv固有情報)\n    - [ ] contents テーブル\n    - [ ] ai_models テーブル\n    - [ ] summaries テーブル (stageカラムを含む)\n    - [ ] notifications テーブル\n    - [ ] tags テーブル\n    - [ ] content_tags テーブル\n    - [ ] users テーブル\n    - [ ] app_settings テーブル\n- [ ] Prisma マイグレーションを実行し、DB スキーマを初期化 (npx prisma migrate dev --name init)\n- [ ] Supabase Studio (GUI) でテーブルが作成されたことを確認\n\n**関連ドキュメント:**\n- [2_Functional_Requirements/data/1_Database_Selection.md](./2_Functional_Requirements/data/1_Database_Selection.md)\n- [2_Functional_Requirements/data/2_Schema_Design.md](./2_Functional_Requirements/data/2_Schema_Design.md)",
  "number": 15,
  "title": "0002.データベース (Supabase) のセットアップ"
}
```

### データアクセス層関連タスク

```json
{
  "body": "# データアクセス層 (lib/db) の実装 - リポジトリクラス (ソース)\n\n## タスク\n\n- [ ] src/lib/db ディレクトリを作成\n- [ ] 各テーブルに対応するリポジトリクラスを作成\n  - [ ] src/lib/db/repositories/sourceRepository.ts (基本ソース情報)\n  - [ ] src/lib/db/repositories/youtubeSourceRepository.ts (YouTube固有情報)\n  - [ ] src/lib/db/repositories/rssSourceRepository.ts (RSS固有情報)\n  - [ ] src/lib/db/repositories/arxivSourceRepository.ts (arXiv固有情報)\n  - [ ] その他必要なリポジトリクラス\n- [ ] 例: sourceRepository.ts を作成し、sources テーブルへのアクセスを行う関数を実装\n  - [ ] ソースタイプごとの関連テーブルも含めた結合クエリの実装\n\n## 関連ドキュメント\n\n- [2_Functional_Requirements/data/2_Schema_Design.md](./2_Functional_Requirements/data/2_Schema_Design.md)",
  "number": 31,
  "title": "0004.データアクセス層 (lib/db) の実装 - リポジトリクラス (ソース)"
}
```

```json
{
  "body": "## データアクセス層 (lib/db) の実装 - リポジトリクラス (要約)\n\n- [ ] src/lib/db ディレクトリを作成\n- [ ] 各テーブルに対応するリポジトリクラスを作成 (src/lib/db/repositories/sourceRepository.ts, src/lib/db/repositories/contentRepository.ts など)\n    - [ ] 例: summaryRepository.ts を作成し、summaries テーブルへのアクセスを行う関数を実装\n    - [ ] 段階的要約（stage）に対応したクエリ関数の実装\n    - [ ] コンテンツIDとAIモデルIDと段階（stage）の組み合わせで要約を取得する関数の実装\n\n**関連ドキュメント:**\n- [2_Functional_Requirements/data/2_Schema_Design.md](./2_Functional_Requirements/data/2_Schema_Design.md)",
  "number": 34,
  "title": "0007.データアクセス層 (lib/db) の実装 - リポジトリクラス (要約)"
}
```

### バックエンドロジック関連タスク

```json
{
  "body": "## バックエンドロジック (services) の実装 - ソースサービス\n\n- [ ] src/lib/services ディレクトリを作成\n- [ ] 各機能 (auth, user, admin, summarize, notification, source, content, ai) ごとにサービスファイルを作成 (src/lib/services/auth/authService.ts, src/lib/services/summarize/summarizeService.ts など)\n- [ ] 各サービスファイル内に、API から呼び出されるビジネスロジックを実装\n    - [ ] 例: sourceService.ts には、YouTube API や RSS フィードからコンテンツを取得する関数を実装\n    - [ ] ソースタイプ（YouTube, RSS, arXiv）ごとの処理を実装\n    - [ ] 各ソースタイプに対応するリポジトリを使用してデータを取得・保存\n\n**関連ドキュメント:**\n- [2_Functional_Requirements/backend/api/admin/sources/README.md](./2_Functional_Requirements/backend/api/admin/sources/README.md)",
  "number": 27,
  "title": "0016.バックエンドロジック (services) の実装 - ソースサービス"
}
```

```json
{
  "body": "## バックエンドロジック (services) の実装 - 要約サービス\n\n- [ ] src/lib/services ディレクトリを作成\n- [ ] 各機能 (auth, user, admin, summarize, notification, source, content, ai) ごとにサービスファイルを作成 (src/lib/services/auth/authService.ts, src/lib/services/summarize/summarizeService.ts など)\n- [ ] 各サービスファイル内に、API から呼び出されるビジネスロジックを実装\n    - [ ] 例: summarizeService.ts には、AI モデル API を呼び出して要約を生成する関数を実装\n    - [ ] 段階的要約（概要→見出し→詳細など）のワークフローを実装\n    - [ ] 各段階（stage）ごとに適切なプロンプトを生成する機能\n    - [ ] 要約結果をstageごとに保存する機能\n\n**関連ドキュメント:**\n- [2_Functional_Requirements/backend/api/common/reusable_components.md](./2_Functional_Requirements/backend/api/common/reusable_components.md)",
  "number": 25,
  "title": "0014.バックエンドロジック (services) の実装 - 要約サービス"
}
```

### API関連タスク

```json
{
  "body": "## API ルート (backend) の実装 - 管理者ロール API (/api/admin) - ソース管理 API\n\n- [ ] 管理者ロール API (/api/admin) の実装\n    - [ ] ソース管理 API (/api/admin/sources/route.ts, /api/admin/sources/[id]/route.ts など)\n        - [ ] ソース一覧取得 API（ソースタイプごとの詳細情報も含む）\n        - [ ] ソース詳細取得 API（ソースタイプに応じた詳細情報を取得）\n        - [ ] ソース作成 API（ソースタイプに応じた情報を保存）\n        - [ ] ソース更新 API（ソースタイプに応じた情報を更新）\n        - [ ] ソース削除 API（関連するソースタイプテーブルのデータも削除）\n\n**関連ドキュメント:**\n- [2_Functional_Requirements/backend/api/admin/sources/README.md](./2_Functional_Requirements/backend/api/admin/sources/README.md)",
  "number": 18,
  "title": "0021.API ルート (backend) の実装 - 管理者ロール API (/api/admin) - ソース管理 API"
}
```

### フロントエンド関連タスク

```json
{
  "body": "## 概要\n\nソース管理画面を実装します。\n\n- [ ] ソース一覧を表示するテーブルを作成する\n- [ ] ページネーションを実装する\n- [ ] 検索機能を実装する\n- [ ] ソースの追加・編集・削除を行うモーダルフォームを作成する\n  - [ ] ソースタイプ（YouTube, RSS, arXiv）に応じて入力フォームを動的に変更\n  - [ ] YouTube固有の設定項目（チャンネルID, チャンネルURL等）\n  - [ ] RSS固有の設定項目（サイトURL, フィードURL等）\n  - [ ] arXiv固有の設定項目（カテゴリ, 検索クエリ等）\n- [ ] APIを呼び出してソースのCRUD操作を行う\n- [ ] レスポンシブ対応\n- [ ] アクセシビリティ対応 (キーボード操作、スクリーンリーダー対応)\n\n**関連ドキュメント:**\n- [2_Functional_Requirements/frontend/screens/3_SourceManagement.md](./2_Functional_Requirements/frontend/screens/3_SourceManagement.md)",
  "number": 52,
  "title": "0039.Frontend: ソース管理画面 (Source Management) の実装"
}
```

```json
{
  "body": "## 概要\n\nコンテンツ詳細画面を実装します。\n\n- [ ] コンテンツのタイトル、サムネイル、元リンクを表示する\n- [ ] AIによる要約結果を表示する\n  - [ ] 複数の段階的要約（概要、見出し、詳細など）をタブまたはアコーディオンで表示\n  - [ ] 複数AIモデルがある場合は切り替え可能に\n- [ ] タグの追加・削除機能を実装する\n- [ ] 通知履歴を表示する\n- [ ] 一覧画面への戻るリンクを実装する\n- [ ] レスポンシブ対応\n- [ ] アクセシビリティ対応 (キーボード操作、スクリーンリーダー対応)\n\n**関連ドキュメント:**\n- [2_Functional_Requirements/frontend/screens/7_ContentDetail.md](./2_Functional_Requirements/frontend/screens/7_ContentDetail.md)",
  "number": 56,
  "title": "0043.Frontend: コンテンツ詳細画面 (Content Detail) の実装"
}
```

```json
{
  "body": "## 概要\n\nアドバンストAIモデル比較画面を実装します。\n\n- [ ] 同じコンテンツに対する複数モデル要約をグラフやテキストで詳細比較\n  - [ ] 段階的要約（概要、見出し、詳細など）ごとの比較表示\n  - [ ] 各段階での要約品質や特徴の比較\n- [ ] トークン消費や要約時間などの計測表示\n- [ ] 各段階（stage）ごとのパフォーマンス比較\n\n**関連ドキュメント:**\n- [2_Functional_Requirements/frontend/screens/11_AdvancedAIComparison.md](./2_Functional_Requirements/frontend/screens/11_AdvancedAIComparison.md)",
  "number": 60,
  "title": "0047.Frontend: アドバンストAIモデル比較画面 (Advanced AI Comparison) の実装"
}
```

以上の変更は、データベース構造の変更に伴い、特に以下の点を反映しています：

1. ソースタイプごとの別テーブル対応
2. 段階的要約（stage）対応
3. メタデータの柔軟な保存

これらの変更により、システムはより柔軟で拡張性の高い構造になり、将来的な機能追加にも対応しやすくなります。

---

_**User**_

各タスクを改行コードではなくマークダウンで構造化して内容に変更して。

---

_**Assistant**_

# タスク更新案

データベース構造の変更に伴い、以下のタスクを更新します。

## データベース関連タスク

### 0002.データベース (Supabase) のセットアップ

```markdown
## データベース (Supabase) のセットアップ

- [ ] Supabase プロジェクトの作成 (supabase.com)
- [ ] プロジェクト設定からデータベース接続情報を取得 (DATABASE_URL, NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY)
- [ ] Prisma スキーマファイル (prisma/schema.prisma) を定義 (テーブル定義を記述)
    - [ ] sources テーブル (基本情報)
    - [ ] youtube_sources テーブル (YouTube固有情報)
    - [ ] rss_sources テーブル (RSS/ブログ固有情報)
    - [ ] arxiv_sources テーブル (arXiv固有情報)
    - [ ] contents テーブル
    - [ ] ai_models テーブル
    - [ ] summaries テーブル (stageカラムを含む)
    - [ ] notifications テーブル
    - [ ] tags テーブル
    - [ ] content_tags テーブル
    - [ ] users テーブル
    - [ ] app_settings テーブル
- [ ] Prisma マイグレーションを実行し、DB スキーマを初期化 (npx prisma migrate dev --name init)
- [ ] Supabase Studio (GUI) でテーブルが作成されたことを確認

**関連ドキュメント:**
- [2_Functional_Requirements/data/1_Database_Selection.md](./2_Functional_Requirements/data/1_Database_Selection.md)
- [2_Functional_Requirements/data/2_Schema_Design.md](./2_Functional_Requirements/data/2_Schema_Design.md)
```

## データアクセス層関連タスク

### 0004.データアクセス層 (lib/db) の実装 - リポジトリクラス (ソース)

```markdown
# データアクセス層 (lib/db) の実装 - リポジトリクラス (ソース)

## タスク

- [ ] src/lib/db ディレクトリを作成
- [ ] 各テーブルに対応するリポジトリクラスを作成
  - [ ] src/lib/db/repositories/sourceRepository.ts (基本ソース情報)
  - [ ] src/lib/db/repositories/youtubeSourceRepository.ts (YouTube固有情報)
  - [ ] src/lib/db/repositories/rssSourceRepository.ts (RSS固有情報)
  - [ ] src/lib/db/repositories/arxivSourceRepository.ts (arXiv固有情報)
  - [ ] その他必要なリポジトリクラス
- [ ] 例: sourceRepository.ts を作成し、sources テーブルへのアクセスを行う関数を実装
  - [ ] ソースタイプごとの関連テーブルも含めた結合クエリの実装

## 関連ドキュメント

- [2_Functional_Requirements/data/2_Schema_Design.md](./2_Functional_Requirements/data/2_Schema_Design.md)
```

### 0007.データアクセス層 (lib/db) の実装 - リポジトリクラス (要約)

```markdown
## データアクセス層 (lib/db) の実装 - リポジトリクラス (要約)

- [ ] src/lib/db ディレクトリを作成
- [ ] 各テーブルに対応するリポジトリクラスを作成 (src/lib/db/repositories/sourceRepository.ts, src/lib/db/repositories/contentRepository.ts など)
    - [ ] 例: summaryRepository.ts を作成し、summaries テーブルへのアクセスを行う関数を実装
    - [ ] 段階的要約（stage）に対応したクエリ関数の実装
    - [ ] コンテンツIDとAIモデルIDと段階（stage）の組み合わせで要約を取得する関数の実装

**関連ドキュメント:**
- [2_Functional_Requirements/data/2_Schema_Design.md](./2_Functional_Requirements/data/2_Schema_Design.md)
```

## バックエンドロジック関連タスク

### 0016.バックエンドロジック (services) の実装 - ソースサービス

```markdown
## バックエンドロジック (services) の実装 - ソースサービス

- [ ] src/lib/services ディレクトリを作成
- [ ] 各機能 (auth, user, admin, summarize, notification, source, content, ai) ごとにサービスファイルを作成 (src/lib/services/auth/authService.ts, src/lib/services/summarize/summarizeService.ts など)
- [ ] 各サービスファイル内に、API から呼び出されるビジネスロジックを実装
    - [ ] 例: sourceService.ts には、YouTube API や RSS フィードからコンテンツを取得する関数を実装
    - [ ] ソースタイプ（YouTube, RSS, arXiv）ごとの処理を実装
    - [ ] 各ソースタイプに対応するリポジトリを使用してデータを取得・保存

**関連ドキュメント:**
- [2_Functional_Requirements/backend/api/admin/sources/README.md](./2_Functional_Requirements/backend/api/admin/sources/README.md)
```

### 0014.バックエンドロジック (services) の実装 - 要約サービス

```markdown
## バックエンドロジック (services) の実装 - 要約サービス

- [ ] src/lib/services ディレクトリを作成
- [ ] 各機能 (auth, user, admin, summarize, notification, source, content, ai) ごとにサービスファイルを作成 (src/lib/services/auth/authService.ts, src/lib/services/summarize/summarizeService.ts など)
- [ ] 各サービスファイル内に、API から呼び出されるビジネスロジックを実装
    - [ ] 例: summarizeService.ts には、AI モデル API を呼び出して要約を生成する関数を実装
    - [ ] 段階的要約（概要→見出し→詳細など）のワークフローを実装
    - [ ] 各段階（stage）ごとに適切なプロンプトを生成する機能
    - [ ] 要約結果をstageごとに保存する機能

**関連ドキュメント:**
- [2_Functional_Requirements/backend/api/common/reusable_components.md](./2_Functional_Requirements/backend/api/common/reusable_components.md)
```

## API関連タスク

### 0021.API ルート (backend) の実装 - 管理者ロール API (/api/admin) - ソース管理 API

```markdown
## API ルート (backend) の実装 - 管理者ロール API (/api/admin) - ソース管理 API

- [ ] 管理者ロール API (/api/admin) の実装
    - [ ] ソース管理 API (/api/admin/sources/route.ts, /api/admin/sources/[id]/route.ts など)
        - [ ] ソース一覧取得 API（ソースタイプごとの詳細情報も含む）
        - [ ] ソース詳細取得 API（ソースタイプに応じた詳細情報を取得）
        - [ ] ソース作成 API（ソースタイプに応じた情報を保存）
        - [ ] ソース更新 API（ソースタイプに応じた情報を更新）
        - [ ] ソース削除 API（関連するソースタイプテーブルのデータも削除）

**関連ドキュメント:**
- [2_Functional_Requirements/backend/api/admin/sources/README.md](./2_Functional_Requirements/backend/api/admin/sources/README.md)
```

## フロントエンド関連タスク

### 0039.Frontend: ソース管理画面 (Source Management) の実装

```markdown
## 概要

ソース管理画面を実装します。

- [ ] ソース一覧を表示するテーブルを作成する
- [ ] ページネーションを実装する
- [ ] 検索機能を実装する
- [ ] ソースの追加・編集・削除を行うモーダルフォームを作成する
  - [ ] ソースタイプ（YouTube, RSS, arXiv）に応じて入力フォームを動的に変更
  - [ ] YouTube固有の設定項目（チャンネルID, チャンネルURL等）
  - [ ] RSS固有の設定項目（サイトURL, フィードURL等）
  - [ ] arXiv固有の設定項目（カテゴリ, 検索クエリ等）
- [ ] APIを呼び出してソースのCRUD操作を行う
- [ ] レスポンシブ対応
- [ ] アクセシビリティ対応 (キーボード操作、スクリーンリーダー対応)

**関連ドキュメント:**
- [2_Functional_Requirements/frontend/screens/3_SourceManagement.md](./2_Functional_Requirements/frontend/screens/3_SourceManagement.md)
```

### 0043.Frontend: コンテンツ詳細画面 (Content Detail) の実装

```markdown
## 概要

コンテンツ詳細画面を実装します。

- [ ] コンテンツのタイトル、サムネイル、元リンクを表示する
- [ ] AIによる要約結果を表示する
  - [ ] 複数の段階的要約（概要、見出し、詳細など）をタブまたはアコーディオンで表示
  - [ ] 複数AIモデルがある場合は切り替え可能に
- [ ] タグの追加・削除機能を実装する
- [ ] 通知履歴を表示する
- [ ] 一覧画面への戻るリンクを実装する
- [ ] レスポンシブ対応
- [ ] アクセシビリティ対応 (キーボード操作、スクリーンリーダー対応)

**関連ドキュメント:**
- [2_Functional_Requirements/frontend/screens/7_ContentDetail.md](./2_Functional_Requirements/frontend/screens/7_ContentDetail.md)
```

### 0047.Frontend: アドバンストAIモデル比較画面 (Advanced AI Comparison) の実装

```markdown
## 概要

アドバンストAIモデル比較画面を実装します。

- [ ] 同じコンテンツに対する複数モデル要約をグラフやテキストで詳細比較
  - [ ] 段階的要約（概要、見出し、詳細など）ごとの比較表示
  - [ ] 各段階での要約品質や特徴の比較
- [ ] トークン消費や要約時間などの計測表示
- [ ] 各段階（stage）ごとのパフォーマンス比較

**関連ドキュメント:**
- [2_Functional_Requirements/frontend/screens/11_AdvancedAIComparison.md](./2_Functional_Requirements/frontend/screens/11_AdvancedAIComparison.md)
```

---

_**User**_

これに対して、
​"""
2. Issue に対応するブランチの命名規則

一般的なブランチ名の規則は以下のとおりです。

feature/<issue-number>-<short-description> (機能追加)

fix/<issue-number>-<short-description> (バグ修正)

chore/<issue-number>-<short-description> (その他、リファクタリングなど)

<issue-number> は Issue 番号、<short-description> は Issue の内容を簡潔に表す単語やフレーズ (kebab-case, 例: add-login-form) です。

例: Issue #123 が「ログインフォームを追加する」という内容であれば、ブランチ名は feature/123-add-login-form となります。

ブランチ作成コマンド (例):
"""
ブランチの命名規則に従って、値を追記して。
その値をそのままブランチに設定して、ブランチ名の命名を簡略化させることが目的です。

---

_**Assistant**_

# タスク更新案（ブランチ命名規則対応）

データベース構造の変更に伴い、以下のタスクを更新します。各タスクにはブランチ命名用の値を追加しています。

## データベース関連タスク

### 0002.データベース (Supabase) のセットアップ

```markdown
## データベース (Supabase) のセットアップ

- [ ] Supabase プロジェクトの作成 (supabase.com)
- [ ] プロジェクト設定からデータベース接続情報を取得 (DATABASE_URL, NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY)
- [ ] Prisma スキーマファイル (prisma/schema.prisma) を定義 (テーブル定義を記述)
    - [ ] sources テーブル (基本情報)
    - [ ] youtube_sources テーブル (YouTube固有情報)
    - [ ] rss_sources テーブル (RSS/ブログ固有情報)
    - [ ] arxiv_sources テーブル (arXiv固有情報)
    - [ ] contents テーブル
    - [ ] ai_models テーブル
    - [ ] summaries テーブル (stageカラムを含む)
    - [ ] notifications テーブル
    - [ ] tags テーブル
    - [ ] content_tags テーブル
    - [ ] users テーブル
    - [ ] app_settings テーブル
- [ ] Prisma マイグレーションを実行し、DB スキーマを初期化 (npx prisma migrate dev --name init)
- [ ] Supabase Studio (GUI) でテーブルが作成されたことを確認

**関連ドキュメント:**
- [2_Functional_Requirements/data/1_Database_Selection.md](./2_Functional_Requirements/data/1_Database_Selection.md)
- [2_Functional_Requirements/data/2_Schema_Design.md](./2_Functional_Requirements/data/2_Schema_Design.md)

**ブランチ名:** `feature/15-setup-supabase-database`
```

## データアクセス層関連タスク

### 0004.データアクセス層 (lib/db) の実装 - リポジトリクラス (ソース)

```markdown
# データアクセス層 (lib/db) の実装 - リポジトリクラス (ソース)

## タスク

- [ ] src/lib/db ディレクトリを作成
- [ ] 各テーブルに対応するリポジトリクラスを作成
  - [ ] src/lib/db/repositories/sourceRepository.ts (基本ソース情報)
  - [ ] src/lib/db/repositories/youtubeSourceRepository.ts (YouTube固有情報)
  - [ ] src/lib/db/repositories/rssSourceRepository.ts (RSS固有情報)
  - [ ] src/lib/db/repositories/arxivSourceRepository.ts (arXiv固有情報)
  - [ ] その他必要なリポジトリクラス
- [ ] 例: sourceRepository.ts を作成し、sources テーブルへのアクセスを行う関数を実装
  - [ ] ソースタイプごとの関連テーブルも含めた結合クエリの実装

## 関連ドキュメント

- [2_Functional_Requirements/data/2_Schema_Design.md](./2_Functional_Requirements/data/2_Schema_Design.md)

**ブランチ名:** `feature/31-implement-source-repositories`
```

### 0007.データアクセス層 (lib/db) の実装 - リポジトリクラス (要約)

```markdown
## データアクセス層 (lib/db) の実装 - リポジ

---



---

